@import url("https://fonts.googleapis.com/css2?family=Georama:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap");

@import "tailwindcss";

html,
body {
  width: 100dvw;
  overflow: hidden;
  height: 100dvh;
  background-image: var(--wallpaper-url, url("/images/wallpaper8.jpg"));
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}

/* Dark mode transitions */
html {
  transition: background-color 0.3s ease;
}

html.dark {
  color-scheme: dark;
}

@theme {
  --font-georama: "Georama", sans-serif;
  --font-roboto: "Roboto Mono", monospace;
  --breakpoint-3xl: 1920px;
}

@utility flex-center {
  @apply flex items-center justify-center;
}

@utility col-center {
  @apply flex flex-col items-center justify-center;
}

@utility abs-center {
  @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
}

@layer base {
  main {
    @apply w-dvw h-dvh overflow-hidden;
  }

  nav {
    @apply select-none;
  }
}

@layer components {
  .nav-bar {
    /* less space from top edge */
    @apply w-full flex items-stretch justify-between px-5 pt-2 pb-2 relative z-[1000];
  }

  .nav-pill {
    /* tighten internal padding and reduce gap between items */
    @apply flex items-center gap-2 bg-white/70 backdrop-blur-3xl border border-white/60 shadow-[0_12px_24px_rgba(0,0,0,0.18)] rounded-full px-3 py-1.5;
  }

  .nav-pill-left {
    @apply relative;
  }

  .nav-pill-right {
    @apply gap-3;
  }

  .nav-title {
    @apply font-semibold text-sm text-gray-800;
  }

  .nav-links {
    @apply flex items-center gap-4 max-sm:hidden;
  }

  .nav-link {
    @apply text-sm text-gray-800 cursor-pointer hover:underline transition-all;
  }

  .nav-icons {
    @apply flex items-center gap-3;
  }

  .nav-time {
    @apply text-sm font-medium text-gray-800;
  }

  .apple-button {
    @apply flex items-center justify-center w-7 h-7 rounded-full hover:bg-white/80 transition-colors;
  }

  .apple-icon {
    @apply w-4 h-4;
  }

  .apple-menu {
    @apply absolute top-full left-2 mt-2 w-56 rounded-xl bg-white/95 backdrop-blur-xl border border-gray-200 shadow-2xl py-2 z-[9999];
  }

  .apple-menu-item {
    @apply w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition-colors;
  }

  .apple-menu-separator {
    @apply h-px bg-gray-200 my-2 mx-3;
  }

  .system-toast {
    @apply fixed top-6 right-6 z-[9999] bg-white/90 text-gray-700 backdrop-blur-xl border border-gray-200 rounded-full px-4 py-2 text-sm shadow-xl;
  }

  .about-mac-overlay {
    @apply fixed inset-0 z-[9998] flex items-center justify-center bg-black/20 backdrop-blur-sm;
  }

  .about-mac-card {
    @apply w-[340px] max-w-[90vw] rounded-[28px] bg-white shadow-2xl border border-white/70 overflow-hidden;
  }

  .about-mac-header {
    @apply px-5 pt-4;
  }

  .about-mac-controls {
    @apply flex items-center gap-2;
  }

  .control-dot {
    @apply w-3.5 h-3.5 rounded-full bg-gray-300;
  }

  .control-dot.close {
    @apply bg-[#ff6157] cursor-pointer;
  }

  .about-mac-content {
    @apply flex flex-col items-center text-center px-6 pb-6 pt-2;
  }

  .about-mac-hero {
    @apply w-full flex items-center justify-center mt-2 mb-2;
  }

  .about-mac-illustration {
    @apply w-40 h-28 drop-shadow-md;
  }

  .about-mac-content h2 {
    @apply text-2xl font-semibold text-gray-900;
  }

  .about-mac-subtitle {
    @apply text-sm text-gray-400 mb-4;
  }

  .about-mac-specs {
    @apply w-full text-sm text-gray-500 space-y-2 mb-4;
  }

  .about-mac-specs div {
    @apply flex items-center justify-between;
  }

  .about-mac-specs strong {
    @apply text-gray-700 font-medium;
  }

  .about-mac-button {
    @apply mt-1 rounded-full bg-gray-100 text-gray-700 px-5 py-2 text-sm font-medium hover:bg-gray-200 transition-colors;
  }

  .system-overlay {
    @apply fixed inset-0 z-[10000] flex items-center justify-center;
  }

  .system-overlay--power {
    @apply bg-black;
  }

  .system-power-center {
    @apply flex flex-col items-center gap-6;
  }

  .system-power-logo {
    @apply w-16 h-16;
    filter: invert(1);
  }

  .system-power-bar {
    @apply w-56 h-1.5 rounded-full bg-white/20 overflow-hidden;
  }

  .system-power-bar__fill {
    @apply block h-full bg-white rounded-full;
    animation: power-progress 3.4s ease-in-out forwards;
  }

  @keyframes power-progress {
    from {
      width: 0%;
    }
    to {
      width: 100%;
    }
  }

  .system-overlay--lock {
    @apply relative flex flex-col bg-black/30 text-white;
    background-image: var(--wallpaper-url, url("/images/wallpaper8.jpg"));
    background-size: cover;
    background-position: center;
  }

  .system-overlay--lock::after {
    content: "";
    @apply absolute inset-0 bg-black/30 backdrop-blur-md;
  }

  .system-overlay--lock > * {
    position: relative;
    z-index: 1;
  }

  .lock-screen-top {
    @apply absolute top-8 left-1/2 -translate-x-1/2;
  }

  .lock-pill {
    @apply bg-black/70 px-8 py-2 rounded-full shadow-lg;
  }

  .lock-pill-icon {
    @apply text-lg;
  }

  .lock-screen-center {
    @apply text-center;
  }

  .lock-screen-date {
    @apply text-xl font-semibold text-white/80 mb-3;
  }

  .lock-screen-time {
    @apply text-7xl font-bold tracking-tight;
  }

  .lock-screen-status {
    @apply mt-4 flex items-center justify-center gap-3 text-white/70 text-sm;
  }

  .lock-screen-hint {
    @apply absolute bottom-10 left-1/2 -translate-x-1/2 text-white/70 text-sm;
  }

  .icon {
    @apply p-1 hover:bg-gray-200 rounded hover:cursor-default;
  }

  #welcome {
    @apply text-gray-200 flex flex-col justify-center items-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 select-none max-sm:h-screen max-sm:w-full max-sm:px-10;

    .small-screen {
      @apply sm:hidden m-7 bg-red-300/20 backdrop-blur-lg p-3 rounded-md absolute top-20;

      p {
        @apply flex-1 text-[16px] text-center font-roboto text-gray-400;
      }
    }
  }

  #dock {
    @apply absolute bottom-5 left-1/2 -translate-x-1/2 z-50 select-none max-sm:scale-75;

    .dock-container {
      @apply bg-white/20 backdrop-blur-md justify-between rounded-2xl p-2.5 pb-4 flex items-end gap-1.5;
    }

    .tooltip {
      @apply !py-1 !px-3 !w-fit !text-center !text-xs !rounded-md !bg-blue-200 !text-blue-900 !shadow-2xl;
    }

    .dock-icon {
      @apply size-14 3xl:size-20 cursor-pointer;

      img {
        @apply object-cover object-center;
      }

      /* Resize music icon */
      img[src*="music.png"] {
        @apply scale-92;
      }

      /* Resize trash icon */
      img[src*="trash.png"] {
        @apply scale-92;
      }

      /* Resize code icon */
      img[src*="code.png"] {
        @apply scale-82;
      }
    }
  }

  #window-controls {
    @apply flex gap-2;

    .close {
      @apply size-3.5 rounded-full bg-[#ff6157] cursor-pointer flex items-center justify-center;
    }

    .minimize {
      @apply size-3.5 rounded-full bg-[#ffc030] cursor-pointer flex items-center justify-center;
    }

    .maximize {
      @apply size-3.5 rounded-full bg-[#2acb42] cursor-pointer flex items-center justify-center;
    }
  }

  #window-header {
    @apply flex items-center justify-between px-4 py-3 rounded-t-lg bg-gray-50 border-b border-gray-200 select-none text-sm text-gray-400;
  }

  #safari {
    @apply w-4xl absolute top-20 left-2/12 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    .search {
      @apply flex items-center gap-3 w-2/3 bg-white border border-gray-300 rounded-lg px-3 py-2;

      input {
        @apply placeholder:text-gray-400;
      }
    }

    .blog {
      @apply bg-white p-10 max-w-3xl mx-auto;

      h2 {
        @apply text-xl font-bold text-pink-600 mb-10;
      }

      .blog-post {
        @apply grid grid-cols-12 space-x-5;

        img {
          @apply size-full rounded-md object-cover;
        }

        .content {
          @apply col-span-10 space-y-3;

          p {
            @apply text-xs text-gray-500;
          }

          h3 {
            @apply font-semibold text-base text-gray-800;
          }

          a {
            @apply text-blue-600 text-xs hover:underline flex items-center gap-3;
          }
        }
      }
    }
  }

  #terminal {
    @apply w-[860px] max-w-[92vw] h-[560px] absolute top-24 left-[10%] bg-gray-950 shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden flex flex-col border border-gray-200;
    isolation: isolate;

    #window-header {
      @apply sticky top-0 z-30;
    }

    h2 {
      @apply font-bold text-sm text-center w-full text-gray-700;
    }

    .terminal-header-note {
      @apply text-[11px] text-gray-500 font-medium;
    }

    .terminal-container {
      @apply flex-1 min-h-0 flex flex-col bg-gradient-to-b from-gray-900 to-gray-950 text-gray-100 font-mono text-sm overflow-hidden;

      .terminal-meta {
        @apply flex items-center px-4 py-2 text-[11px] text-gray-400 border-b border-white/10;
      }

      .terminal-output {
        @apply flex-1 min-h-0 overflow-y-auto overflow-x-hidden p-4 whitespace-pre-wrap break-words;
        overscroll-behavior: contain;
        scrollbar-gutter: stable;

        &::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        &::-webkit-scrollbar-track {
          background: #050505;
        }

        &::-webkit-scrollbar-thumb {
          background: #171717;
          border-radius: 9999px;
          border: 2px solid #050505;
        }

        &::-webkit-scrollbar-thumb:hover {
          background: #262626;
        }

        scrollbar-color: #171717 #050505;
        scrollbar-width: thin;

        .terminal-line {
          @apply leading-6 text-[13px];

          &.terminal-text {
            @apply text-gray-100;
          }

          &.terminal-command {
            @apply text-cyan-300 font-semibold;
          }

          &.terminal-system {
            @apply text-emerald-300 font-semibold;
          }

          &.terminal-success {
            @apply text-emerald-400;
          }

          &.terminal-error {
            @apply text-red-300;
          }

          &.terminal-muted {
            @apply text-gray-400;
          }

          &.terminal-ascii {
            @apply text-indigo-300 font-bold selection:bg-indigo-700;
          }
        }

        .terminal-link {
          @apply text-sky-300 hover:text-sky-200 hover:underline;
        }
      }

      .terminal-input-area {
        @apply sticky bottom-0 z-20 flex items-center min-h-12 bg-black/85 backdrop-blur-sm px-4 py-3 border-t border-white/10;

        .terminal-prompt {
          @apply text-emerald-400 font-bold mr-2 flex-shrink-0;
        }

        .terminal-input {
          @apply flex-1 h-6 leading-6 bg-transparent text-gray-100 outline-none border-none font-mono text-sm;
          caret-color: #34d399;

          &::placeholder {
            @apply text-gray-500;
          }
        }
      }
    }
  }

  #contact {
    @apply max-w-2xl absolute top-60 left-5/12 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    h2 {
      @apply font-bold text-sm text-center w-full;
    }

    h3 {
      @apply text-xl font-semibold;
    }

    ul {
      @apply flex items-center gap-3;

      li {
        @apply rounded-lg p-3 w-60 hover:-translate-y-0.5 hover:scale-105 origin-center transition-all duration-300;

        a {
          @apply space-y-5;
        }

        p {
          @apply font-semibold text-sm text-white;
        }
      }
    }
  }

  #photos {
    @apply max-w-3xl h-[600px] absolute top-25 left-1/2 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    .sidebar {
      @apply w-3/12 flex-none bg-gray-50 border-r border-gray-200 flex flex-col p-5;

      h2 {
        @apply text-xs font-medium text-gray-400 mb-1;
      }

      ul {
        li {
          @apply flex space-y-1 items-center gap-2 px-3 py-2 rounded-md cursor-pointer transition-colors;

          &:first-child {
            @apply bg-blue-100 text-blue-700;
          }

          img {
            @apply w-4;
          }

          p {
            @apply text-sm font-medium;
          }
        }
      }
    }

    .gallery {
      @apply p-5 flex-1 overflow-y-auto min-h-0;

      ul {
        column-count: 2;
        column-gap: 0.625rem; /* 2.5 * 0.25rem */
      }
      @media (min-width: 640px) {
        .gallery ul { column-count: 3; }
      }
      @media (min-width: 768px) {
        .gallery ul { column-count: 4; }
      }
      @media (min-width: 1920px) {
        .gallery ul { column-count: 6; }
      }

      li {
        display: inline-block;
        width: 100%;
        margin-bottom: 0.625rem;
        break-inside: avoid;
        -webkit-column-break-inside: avoid;
        -moz-column-break-inside: avoid;
        cursor: pointer;
      }
      li img {
        @apply rounded-lg;
        width: 100%;
        height: auto;
      }
    }
  }


  #finder {
    @apply absolute w-3xl h-[600px] left-40 top-20 shadow-2xl drop-shadow-2xl overflow-hidden rounded-xl;

    .sidebar {
      @apply w-48 bg-gray-50 border-r border-gray-200 flex flex-col p-5 space-y-3;

      h3 {
        @apply text-xs font-medium text-gray-400 mb-1;
      }

      ul {
        @apply space-y-1;

        .active {
          @apply bg-blue-100 text-blue-700;
        }

        .not-active {
          @apply text-gray-700 hover:bg-gray-200;
        }

        li {
          @apply flex items-center gap-2 px-3 py-2 rounded-md cursor-pointer transition-colors;
        }
      }
    }

    .content {
      @apply flex-1 p-8 bg-white max-w-2xl relative;

      li {
        @apply absolute flex items-center flex-col gap-3 cursor-pointer;
        
        &.item-selected {
          @apply px-2 py-1;

          img {
            @apply rounded-md;
          }

          p {
            @apply bg-blue-500 text-white rounded-md px-2 py-0.5 shadow-sm inline-block w-auto max-w-40;
          }
        }

        img {
          @apply object-contain object-center size-16 relative group-hover:scale-105;
        }

        p {
          @apply text-sm text-center font-medium w-40;
        }
      }
    }
  }

  .quicklook-overlay {
    @apply absolute inset-0 bg-black/20 flex items-center justify-center z-[9999];
    animation: quicklook-fade-in 0.2s ease-out;
  }

  .quicklook-panel {
    @apply w-[520px] max-w-[85%] max-h-[75%] bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden;
    animation: quicklook-scale-in 0.2s ease-out;
  }

  @keyframes quicklook-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes quicklook-scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .quicklook-header {
    @apply flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200 text-xs text-gray-600;
  }

  .quicklook-title {
    @apply font-semibold uppercase tracking-wide;
  }

  .quicklook-close {
    @apply text-gray-500 hover:text-gray-800 text-lg leading-none;
  }

    .quicklook-body {
      @apply p-4 space-y-3 text-sm text-gray-800 overflow-y-auto max-h-[60vh];
    }

    .quicklook-body img {
      @apply max-w-full max-h-[45vh] object-contain rounded-lg mx-auto;
    }

    .quicklook-body pre {
      @apply whitespace-pre-wrap text-sm leading-relaxed bg-gray-50 border border-gray-200 rounded-lg p-3;
    }

    .quicklook-body ul {
      @apply space-y-1;
    }

    .quicklook-body a {
      @apply text-blue-600 hover:underline;
    }

    .quicklook-name {
      @apply font-semibold text-gray-900;
    }

  #txtfile {
    @apply w-md h-[550px] absolute top-36 right-32 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    h2 {
      @apply font-bold text-sm text-center w-full;
    }
  }

  #txtfile.info-mode {
    @apply w-[640px] h-[680px] top-28 left-1/2 -translate-x-1/2 right-auto bg-gradient-to-br from-gray-50 via-white to-gray-100 border border-gray-200 shadow-2xl drop-shadow-2xl rounded-2xl;
  }

  #txtfile .info-header {
    @apply bg-white/80 backdrop-blur-lg border-b border-gray-200;
  }

  #txtfile .info-chip {
    @apply text-[11px] px-3 py-1 rounded-full bg-blue-50 text-blue-700 border border-blue-100 font-semibold;
  }

  #txtfile .info-body {
    @apply grid grid-cols-[1.7fr_1.1fr] gap-5 p-6 h-full overflow-y-auto;
  }

  #txtfile .info-main {
    @apply space-y-5;
  }

  #txtfile .info-hero {
    @apply flex items-center gap-4 bg-white border border-gray-200 rounded-xl p-4 shadow-sm;
  }

  #txtfile .info-icon {
    @apply size-16 rounded-lg border border-gray-200 bg-gray-50 flex items-center justify-center shadow-inner;
  }

  #txtfile .info-icon img {
    @apply w-12 h-12 object-contain;
  }

  #txtfile .info-title {
    @apply text-base font-semibold text-gray-800;
  }

  #txtfile .info-subtitle {
    @apply text-sm text-gray-500;
  }

  #txtfile .info-path {
    @apply text-xs text-gray-500;
  }

  #txtfile .info-tags {
    @apply flex flex-wrap gap-2 mt-2;
  }

  #txtfile .info-tags span {
    @apply text-xs px-2 py-1 rounded-full bg-blue-50 text-blue-700 border border-blue-100;
  }

  #txtfile .info-section {
    @apply bg-white border border-gray-200 rounded-xl shadow-sm;
  }

  #txtfile .info-section-header {
    @apply flex items-center justify-between px-4 py-3 text-xs font-semibold text-gray-600 border-b border-gray-100 uppercase tracking-wide;
  }

  #txtfile .info-grid {
    @apply grid grid-cols-1 divide-y divide-gray-100;
  }

  #txtfile .info-row {
    @apply flex items-start justify-between gap-3 px-4 py-2 text-sm;
  }

  #txtfile .info-row dt {
    @apply text-gray-500 whitespace-nowrap;
  }

  #txtfile .info-row dd {
    @apply text-gray-800 text-right flex-1;
  }

  #txtfile .info-switches {
    @apply px-4 py-3 space-y-2;
  }

  #txtfile .info-switch {
    @apply flex items-center justify-between text-sm text-gray-700;
  }

  #txtfile .switch {
    @apply inline-flex w-10 h-5 rounded-full bg-gray-200 relative transition-all duration-200;
  }

  #txtfile .switch::after {
    content: "";
    @apply absolute size-4 bg-white rounded-full shadow left-0.5 top-0.5 transition-all duration-200;
  }

  #txtfile .switch.on {
    @apply bg-blue-500;
  }

  #txtfile .switch.on::after {
    @apply translate-x-5;
  }

  #txtfile .info-aside {
    @apply space-y-4;
  }

  #txtfile .preview-card,
  #txtfile .action-card {
    @apply bg-white border border-gray-200 rounded-xl shadow-sm;
  }

  #txtfile .card-header {
    @apply flex items-center justify-between px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide;
  }

  #txtfile .pill {
    @apply text-[11px] px-2 py-1 rounded-full bg-gray-100 text-gray-700 border border-gray-200;
  }

  #txtfile .preview-frame {
    @apply p-4 bg-gray-50 border-t border-gray-100 rounded-b-xl flex items-center justify-center min-h-36;
  }

  #txtfile .preview-frame img {
    @apply max-h-44 max-w-full object-contain;
  }

  #txtfile .preview-text {
    @apply w-full max-h-48 overflow-auto whitespace-pre-wrap text-xs font-roboto text-gray-800 bg-white border border-gray-200 rounded-lg p-3 leading-relaxed;
  }

  #txtfile .preview-list {
    @apply w-full text-sm text-gray-800 space-y-1 max-h-48 overflow-auto pr-1;
  }

  #txtfile .preview-list li {
    @apply flex items-center gap-2 text-xs bg-white border border-gray-200 rounded-md px-2 py-1 shadow-sm;
  }

  #txtfile .preview-icon {
    @apply flex items-center justify-center w-full;
  }

  #txtfile .preview-icon img {
    @apply w-12 h-12 object-contain drop-shadow;
  }

  #txtfile .preview-placeholder {
    @apply text-sm text-gray-400;
  }

  #txtfile .action-list {
    @apply divide-y divide-gray-100 text-sm;
  }

  #txtfile .action-list li {
    @apply px-4 py-2 text-gray-700;
  }

  #imgfile {
    @apply w-xl absolute top-40 left-2/12 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    #window-header {
      p {
        @apply font-bold text-[#5f6266];
      }
    }

    .preview {
      @apply p-2 bg-gray-200 max-h-[70vh];

      img {
        @apply w-full h-fit object-contain object-center;
      }
    }
  }

  #home {
    @apply relative z-10 max-sm:hidden w-full h-full absolute top-0 left-0 pointer-events-none;

    ul {
      @apply pointer-events-auto;
      
      li {
        @apply absolute z-0 select-none flex items-center flex-col pointer-events-auto cursor-pointer;

        &.folder-selected {
          img {
            @apply bg-gray-950/15;
          }

          p {
            @apply bg-blue-500;
          }
        }

        img {
          @apply group-hover:bg-gray-950/10 p-1 rounded-md w-16 h-16 object-contain;
        }

        p {
          @apply text-sm text-white text-center px-1 rounded-md group-hover:bg-blue-500 transition-colors max-w-32 whitespace-normal break-words leading-tight;
        }
      }
    }
  }

  #vscode {
    @apply w-6xl h-[700px] absolute top-10 right-20 bg-white shadow-2xl drop-shadow-2xl rounded-xl overflow-hidden;

    #window-header {
      @apply flex items-center justify-between bg-gray-50 border-b border-gray-200 select-none text-sm text-gray-400;

      h2 {
        @apply flex-1 text-center font-bold text-sm;
      }

      a {
        @apply flex items-center;
      }
    }
  }
}